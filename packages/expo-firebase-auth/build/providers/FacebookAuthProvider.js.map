{"version":3,"file":"FacebookAuthProvider.js","sourceRoot":"","sources":["../../src/providers/FacebookAuthProvider.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,UAAU,EAAE,MAAM,kBAAkB,CAAC;AAC9C,OAAO,QAAQ,MAAM,4BAA4B,CAAC;AAClD,OAAO,KAAK,QAAQ,MAAM,eAAe,CAAC;AAE1C,OAAO,iBAAiB,MAAM,qBAAqB,CAAC;AAEpD,MAAM,CAAC,OAAO,OAAO,oBAAqB,SAAQ,iBAAiB;IAGjE;QACE,KAAK,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAC;IAC1C,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,IAAU;QACrB,qDAAqD;QAErD,MAAM,eAAe,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAC3C,MAAM,EACJ,IAAI,EACJ,KAAK,GAIN,GAAG,MAAM,QAAQ,CAAC,6BAA6B,CAAC;YAC/C,WAAW,EAAE,eAAe;SAC7B,CAAC,CAAC;QACH,IAAI,IAAI,KAAK,SAAS,EAAE;YACtB,oBAAoB;YACpB,MAAM,IAAI,UAAU,CAAC,8BAA8B,EAAE,WAAW,CAAC,CAAC;SACnE;QAED,MAAM,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QACxE,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,UAAU,CAAC,CAAC;QACnE,OAAO,cAAc,CAAC;IACxB,CAAC;;AA3BM,gCAAW,GAAG,cAAc,CAAC","sourcesContent":["import { CodedError } from '@unimodules/core';\nimport firebase from '@react-native-firebase/app';\nimport * as Facebook from 'expo-facebook';\nimport { Auth } from './types';\nimport FederatedProvider from './FederatedProvider';\n\nexport default class FacebookAuthProvider extends FederatedProvider {\n  static PROVIDER_ID = 'facebook.com';\n\n  constructor() {\n    super(FacebookAuthProvider.PROVIDER_ID);\n  }\n\n  async signIn(auth: Auth) {\n    // TODO map scopes & custom parameters to permissions\n\n    const readPermissions = ['public_profile'];\n    const {\n      type,\n      token,\n      /*expires,\n      permissions,\n      declinedPermissions,*/\n    } = await Facebook.logInWithReadPermissionsAsync({\n      permissions: readPermissions,\n    });\n    if (type !== 'success') {\n      // type === 'cancel'\n      throw new CodedError('auth/cancelled-popup-request', 'Cancelled');\n    }\n\n    const credential = firebase.auth.FacebookAuthProvider.credential(token);\n    const userCredential = await auth.signInWithCredential(credential);\n    return userCredential;\n  }\n}\n"]}